<html>

<body>

    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

    <div id="chart" style="width:1000px;height:400px;display:inline-block;"></div>
    <script type='text/javascript'>
        var stats = [["NY", {"positive": 1700, "deaths": 7, "lower95": 708, "lower50": 2689, "median": 5579, "upper50": 11427, "upper95": 37484}], ["WA", {"positive": 904, "deaths": 48, "lower95": 5781, "lower50": 21392, "median": 40624, "upper50": 82787, "upper95": 241449}], ["CA", {"positive": 483, "deaths": 11, "lower95": 1224, "lower50": 4509, "median": 8963, "upper50": 18894, "upper95": 59624}], ["NJ", {"positive": 267, "deaths": 3, "lower95": 227, "lower50": 1002, "median": 2254, "upper50": 4727, "upper95": 18437}], ["MA", {"positive": 218}], ["FL", {"positive": 186, "deaths": 6, "lower95": 598, "lower50": 2325, "median": 4671, "upper50": 10063, "upper95": 34052}], ["LA", {"positive": 171, "deaths": 4, "lower95": 333, "lower50": 1401, "median": 3081, "upper50": 6249, "upper95": 23681}], ["IL", {"positive": 160, "deaths": 1, "lower95": 13, "lower50": 185, "median": 548, "upper50": 1496, "upper95": 8171}], ["CO", {"positive": 160, "deaths": 1, "lower95": 13, "lower50": 185, "median": 548, "upper50": 1496, "upper95": 8171}], ["GA", {"positive": 146, "deaths": 1, "lower95": 13, "lower50": 185, "median": 548, "upper50": 1496, "upper95": 8171}], ["PA", {"positive": 96}], ["TN", {"positive": 73}], ["WI", {"positive": 72}], ["VA", {"positive": 67, "deaths": 1, "lower95": 13, "lower50": 185, "median": 548, "upper50": 1496, "upper95": 8171}], ["OH", {"positive": 67}], ["MI", {"positive": 65}], ["TX", {"positive": 64, "deaths": 1, "lower95": 13, "lower50": 185, "median": 548, "upper50": 1496, "upper95": 8171}], ["MN", {"positive": 60}], ["MD", {"positive": 57}], ["NV", {"positive": 55, "deaths": 1, "lower95": 13, "lower50": 185, "median": 548, "upper50": 1496, "upper95": 8171}], ["UT", {"positive": 51}], ["OR", {"positive": 47}], ["CT", {"positive": 41}], ["NC", {"positive": 40}], ["AL", {"positive": 36}], ["SC", {"positive": 33, "deaths": 1, "lower95": 13, "lower50": 185, "median": 548, "upper50": 1496, "upper95": 8171}], ["ME", {"positive": 32}], ["IN", {"positive": 30, "deaths": 2, "lower95": 107, "lower50": 567, "median": 1357, "upper50": 3101, "upper95": 12475}], ["IA", {"positive": 23}], ["NM", {"positive": 23}], ["DC", {"positive": 22}], ["KY", {"positive": 22, "deaths": 1, "lower95": 13, "lower50": 185, "median": 548, "upper50": 1496, "upper95": 8171}], ["AR", {"positive": 22}], ["MS", {"positive": 21}], ["RI", {"positive": 21}], ["NE", {"positive": 21}], ["AZ", {"positive": 20}], ["OK", {"positive": 17}], ["NH", {"positive": 17}], ["DE", {"positive": 16}], ["KS", {"positive": 15, "deaths": 1, "lower95": 13, "lower50": 185, "median": 548, "upper50": 1496, "upper95": 8171}], ["SD", {"positive": 11}], ["VT", {"positive": 10}], ["WY", {"positive": 10}], ["HI", {"positive": 10}], ["MO", {"positive": 8}], ["MT", {"positive": 8}], ["ID", {"positive": 7}], ["PR", {"positive": 5}], ["GU", {"positive": 5}], ["ND", {"positive": 3}], ["AK", {"positive": 3}], ["VI", {"positive": 2}], ["WV", {"positive": 0}], ["AS", {"positive": 0}], ["MP", {"positive": 0}]];

        var data = [
            {
                name: 'Cases estimated from deaths',
                x: Array(stats.length).fill(1).map((v, j) => j+1),
                y: Array(stats.length).fill(1).map((v, j) => stats[j][1]['median']),
                marker: {
                    color: 'blue',
                    opacity: 0
                },
                type: 'scatter',
                mode: 'markers',
            },
            {
                name: 'Confirmed cases',
                x: Array(stats.length).fill(1).map((v, j) => j+1),
                y: Array(stats.length).fill(1).map((v, j) => stats[j][1]['positive']),
                type: 'scatter',
                mode: 'markers',
            },
            {
                name: 'Deaths',
                x: Array(stats.length).fill(1).map((v, j) => j+1),
                y: Array(stats.length).fill(1).map((v, j) => stats[j][1]['deaths']),
                type: 'scatter',
                mode: 'markers',
            },
        ];

        shapes = []
        for(var j=0; j<stats.length; j++) {
            if(stats[j][1]['lower50'] != undefined) {
                shapes.push(
                    {layer:'below', type:'line', line:{width:3, color:'blue'}, 
                    x0: j+1, x1: j+1, y0: stats[j][1]['lower50'], y1: stats[j][1]['upper50'] });
                shapes.push(
                    {layer:'below', type:'line', line:{width:1, color:'blue'}, 
                    x0: j+1, x1: j+1, y0: stats[j][1]['lower95'], y1: stats[j][1]['upper95'] });
            }
        }

        layout = {
            hovermode: 'closest',
            xaxis: {
                tickvals: Array(stats.length).fill(1).map((v, j) => j+1),
                ticktext: Array(stats.length).fill(1).map((v, j) => stats[j][0]),
                range: [0, stats.length+1],
                showgrid: false,
                tickson: "boundaries",
                ticklen: 10,
                showline: true,
                showzero: false
            },
            // margin: {l:50, b:50, r:0, t:50, pad:0},
            yaxis: {
                type: 'log',
                autorange: true,
                showgrid: false,
                showline: false,
                showzero: false,
                tickson: "boundaries",
                ticklen: 10,
            },
            legend: {
                x: 1,
                xanchor: 'right',
                y: 1
            },
            shapes: shapes

        };

        Plotly.newPlot('chart', data, layout);

    </script>

</body>

</html>